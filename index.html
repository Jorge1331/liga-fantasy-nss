<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LIGA FANTASY NSS 25/26</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --color-primary:#1D4ED8;
      --color-dark:#000000;
      --color-light:#ffffff;
    }
    body {font-family:'Segoe UI',sans-serif;}
    .btn-primary {background:var(--color-primary);color:var(--color-light);} 
    .btn-primary:hover {background:#1746c5;}
    .hero-bg {
      background:linear-gradient(135deg,var(--color-primary) 0%,#0f1b3d 100%);
    }
    .skew-bottom {position:relative;}
    .skew-bottom::after{content:"";position:absolute;bottom:-1px;left:0;width:100%;height:80px;background:var(--color-light);transform:skewY(3deg);transform-origin:0;}
  </style>
</head>
<body class="min-h-screen bg-gray-100">
  <!-- Hero de Bienvenida -->
  <section id="intro" class="hero-bg skew-bottom text-center text-white flex flex-col items-center justify-center min-h-screen px-6">
    <img src="images/logo.png" alt="Logo Colegio" class="w-44 mb-8 drop-shadow-lg" />
    <h1 class="text-5xl font-extrabold tracking-wide mb-4">LIGA FANTASY NSS 25/26</h1>
    <p class="text-xl mb-10 max-w-xl mx-auto">¡Motivando el aprendizaje con espíritu competitivo y trabajo en equipo!</p>
    <div class="flex justify-center mb-12 space-x-6">
      <img src="https://images.unsplash.com/photo-1596495577886-d920f1fb7238?auto=format&fit=crop&w=240&q=80" alt="Alumno feliz" class="w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg"/>
      <img src="https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=240&q=80" alt="Alumna feliz" class="w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg"/>
    </div>
    <button onclick="startApp()" class="btn-primary px-8 py-3 rounded-full text-lg font-semibold shadow-xl transition transform hover:-translate-y-1">Entrar a la Liga</button>
  </section>

  <!-- App Principal -->
  <div id="mainApp" class="hidden flex flex-col min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow sticky top-0 z-20">
      <div class="max-w-6xl mx-auto flex items-center justify-between py-3 px-4">
        <div class="flex items-center space-x-4">
          <img src="images/logo.png" alt="Logo" class="h-10"/>
          <h2 class="text-2xl font-bold text-gray-900">LIGA FANTASY NSS 25/26</h2>
        </div>
        <button onclick="goHome()" class="btn-primary px-4 py-1 rounded">Inicio</button>
      </div>
    </header>

    <!-- Pantalla de Selección -->
    <section id="selector" class="flex-1 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 p-6 place-items-center">
      <button class="w-full h-24 text-white font-bold rounded-lg bg-blue-600 hover:bg-blue-700" onclick="showSection('5a')">Clase 5A</button>
      <button class="w-full h-24 text-white font-bold rounded-lg bg-blue-600 hover:bg-blue-700" onclick="showSection('5b')">Clase 5B</button>
      <button class="w-full h-24 text-white font-bold rounded-lg bg-blue-600 hover:bg-blue-700" onclick="showSection('6a')">Clase 6A</button>
      <button class="w-full h-24 text-white font-bold rounded-lg bg-blue-600 hover:bg-blue-700" onclick="showSection('6b')">Clase 6B</button>
      <button class="w-full h-24 text-white font-bold rounded-lg bg-gray-800 hover:bg-gray-900" onclick="showSection('objetivos')">Objetivos</button>
      <button class="w-full h-24 text-white font-bold rounded-lg bg-emerald-600 hover:bg-emerald-700" onclick="showSection('recompensas')">Recompensas</button>
      <button class="w-full h-24 text-white font-bold rounded-lg bg-orange-600 hover:bg-orange-700" onclick="showSection('entrevistas')">Entrevistas</button>
    </section>

    <!-- Navegación superior clásica -->
    <nav id="nav-top" class="hidden bg-gray-200">
      <div class="max-w-6xl mx-auto flex flex-wrap justify-center gap-2 py-2">
        <button class="tab-btn btn-primary px-4 py-1 rounded" onclick="showSection('5a')">5ºA</button>
        <button class="tab-btn btn-primary px-4 py-1 rounded" onclick="showSection('5b')">5ºB</button>
        <button class="tab-btn btn-primary px-4 py-1 rounded" onclick="showSection('6a')">6ºA</button>
        <button class="tab-btn btn-primary px-4 py-1 rounded" onclick="showSection('6b')">6ºB</button>
        <button class="tab-btn bg-gray-800 text-white px-4 py-1 rounded" onclick="showSection('objetivos')">Objetivos</button>
        <button class="tab-btn bg-gray-800 text-white px-4 py-1 rounded" onclick="showSection('recompensas')">Recompensas</button>
        <button class="tab-btn bg-orange-600 text-white px-4 py-1 rounded" onclick="showSection('entrevistas')">Entrevistas</button>
      </div>
    </nav>

    <!-- Contenido -->
    <main class="flex-1 max-w-6xl mx-auto w-full p-4">
      <section id="5ºA" class="hidden">
        <section id="5ºA" class="hidden">
  <!-- 5ºA: Panel de clase (autosuficiente y aislado) -->
  <div class="flex flex-col gap-4">
    <!-- Encabezado + Acciones -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
      <div>
        <h3 class="text-3xl font-extrabold tracking-tight">Clase 5ºA</h3>
        <p class="text-sm text-gray-600">Temporada 25/26 · Gestión local (solo en este dispositivo)</p>
      </div>
      <div class="flex flex-wrap gap-2">
        <button id="c5a-btn-mvp" class="px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 shadow">🎲 Sorteo MVP</button>
        <button id="c5a-btn-reset" class="px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 shadow">🧹 Reset puntos</button>
        <button id="c5a-btn-edit" class="px-4 py-2 rounded-lg bg-gray-900 text-white hover:bg-black shadow">✏️ Editar lista</button>
      </div>
    </div>

    <!-- Tarjetas de métricas -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
      <div class="bg-white shadow rounded-xl p-4">
        <p class="text-xs text-gray-500">Alumnos</p>
        <p id="c5a-metric-count" class="text-2xl font-bold">—</p>
      </div>
      <div class="bg-white shadow rounded-xl p-4">
        <p class="text-xs text-gray-500">Puntos totales</p>
        <p id="c5a-metric-total" class="text-2xl font-bold">—</p>
      </div>
      <div class="bg-white shadow rounded-xl p-4">
        <p class="text-xs text-gray-500">Media</p>
        <p id="c5a-metric-avg" class="text-2xl font-bold">—</p>
      </div>
      <div class="bg-white shadow rounded-xl p-4">
        <p class="text-xs text-gray-500">Líder</p>
        <p id="c5a-metric-leader" class="text-sm font-semibold">—</p>
      </div>
    </div>

    <!-- Podio -->
    <div class="grid md:grid-cols-3 gap-3">
      <div class="bg-white shadow rounded-xl p-4 border-t-4 border-amber-400">
        <p class="text-sm text-gray-500">🥇 1º</p>
        <p id="c5a-p1" class="font-bold">—</p>
        <p id="c5a-p1p" class="text-sm text-gray-700">— pts</p>
      </div>
      <div class="bg-white shadow rounded-xl p-4 border-t-4 border-gray-400">
        <p class="text-sm text-gray-500">🥈 2º</p>
        <p id="c5a-p2" class="font-bold">—</p>
        <p id="c5a-p2p" class="text-sm text-gray-700">— pts</p>
      </div>
      <div class="bg-white shadow rounded-xl p-4 border-t-4 border-orange-400">
        <p class="text-sm text-gray-500">🥉 3º</p>
        <p id="c5a-p3" class="font-bold">—</p>
        <p id="c5a-p3p" class="text-sm text-gray-700">— pts</p>
      </div>
    </div>

    <!-- MVP de la semana -->
    <div class="bg-gradient-to-r from-indigo-600 to-blue-600 text-white rounded-xl p-4 shadow flex items-center justify-between">
      <div>
        <p class="text-sm opacity-90">Jugador/a de la semana</p>
        <p id="c5a-mvp-name" class="text-xl font-extrabold">Aún sin elegir</p>
      </div>
      <div class="text-right">
        <p id="c5a-mvp-points" class="text-sm opacity-90">— pts</p>
        <button id="c5a-btn-clear-mvp" class="mt-2 px-3 py-1 rounded bg-white/15 hover:bg-white/25">Quitar MVP</button>
      </div>
    </div>

    <!-- Registro rápido de objetivos -->
    <div class="bg-white shadow rounded-xl p-4">
      <h4 class="font-semibold mb-3">Registrar objetivo rápido</h4>
      <div class="flex flex-col md:flex-row gap-2 items-stretch md:items-center">
        <select id="c5a-quick-student" class="border rounded-lg px-3 py-2 flex-1"></select>
        <select id="c5a-quick-reason" class="border rounded-lg px-3 py-2">
          <option value="1">📚 Entrega de tareas (+1)</option>
          <option value="1">🙌 Buena acción (+1)</option>
          <option value="3">📖 Libro extra (+3)</option>
          <option value="-1">❌ Falta de trabajo (-1)</option>
          <option value="-3">🚫 Incidencia grave (-3)</option>
        </select>
        <button id="c5a-quick-apply" class="btn-primary px-4 py-2 rounded-lg">Aplicar</button>
      </div>
    </div>

    <!-- Tabla de clasificación -->
    <div class="overflow-x-auto bg-white shadow rounded-xl">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">#</th>
            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Alumno</th>
            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Puntos</th>
            <th class="px-4 py-2"></th>
          </tr>
        </thead>
        <tbody id="c5a-tbody" class="divide-y divide-gray-200"></tbody>
      </table>
    </div>

    <!-- Editor de lista (oculto hasta pulsar Editar lista) -->
    <div id="c5a-editor" class="hidden bg-white shadow rounded-xl p-4">
      <h4 class="font-semibold mb-2">Editar lista de alumnos</h4>
      <p class="text-sm text-gray-600 mb-3">Escribe un nombre por línea. <strong>Se reiniciarán los puntos</strong> al aplicar cambios.</p>
      <textarea id="c5a-textarea" class="w-full h-40 border rounded-lg p-3 font-mono text-sm"></textarea>
      <div class="mt-3 flex gap-2">
        <button id="c5a-editor-apply" class="px-4 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700">Aplicar cambios</button>
        <button id="c5a-editor-cancel" class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- Lógica ESPECÍFICA de 5ºA (aislada y sin colisionar con el resto) -->
  <script>
    (function(){
      const sec = document.getElementById('5a');
      const KEY = 'fantasy_5a_roster_v1';
      const KEY_MVP = 'fantasy_5a_mvp_v1';

      const defaultNames = [
        'Álvaro','Lucía','Martín','Sofía','Leo','Daniela','Mateo','Emma','Hugo','Valeria',
        'Lucas','Carla','Pablo','Julia','Enzo','Martina','Alejandro','Paula','Manuel','Sara',
        'Adrián','Noa','David','Chloe','Mario'
      ];

      const $ = (sel)=>sec.querySelector(sel);

      function load(){
        try{
          const raw = localStorage.getItem(KEY);
          if(raw) return JSON.parse(raw);
        }catch(e){}
        return defaultNames.map(n=>({name:n, points:0}));
      }
      function save(){ localStorage.setItem(KEY, JSON.stringify(roster)); }

      function loadMvp(){
        try{
          const raw = localStorage.getItem(KEY_MVP);
          if(raw) return JSON.parse(raw); // {name, points}
        }catch(e){}
        return null;
      }
      function saveMvp(mvp){ 
        if(mvp) localStorage.setItem(KEY_MVP, JSON.stringify(mvp));
        else localStorage.removeItem(KEY_MVP);
      }

      let roster = load();
      let mvp = loadMvp();

      function sortRoster(){
        roster.sort((a,b)=> b.points - a.points || a.name.localeCompare(b.name));
      }

      function stats(){
        const count = roster.length;
        const total = roster.reduce((s,a)=>s+a.points,0);
        const avg = count? (total/count).toFixed(1) : '0.0';
        const leader = roster[0]? roster[0].name+' ('+roster[0].points+')':'—';
        $('#c5a-metric-count').textContent = count;
        $('#c5a-metric-total').textContent = total;
        $('#c5a-metric-avg').textContent = avg;
        $('#c5a-metric-leader').textContent = leader;
      }

      function renderPodium(){
        const p1 = roster[0], p2 = roster[1], p3 = roster[2];
        $('#c5a-p1').textContent = p1? p1.name : '—';
        $('#c5a-p1p').textContent = p1? p1.points+' pts':'— pts';
        $('#c5a-p2').textContent = p2? p2.name : '—';
        $('#c5a-p2p').textContent = p2? p2.points+' pts':'— pts';
        $('#c5a-p3').textContent = p3? p3.name : '—';
        $('#c5a-p3p').textContent = p3? p3.points+' pts':'— pts';
      }

      function renderMvp(){
        if(mvp){
          $('#c5a-mvp-name').textContent = mvp.name;
          $('#c5a-mvp-points').textContent = mvp.points+' pts';
        }else{
          $('#c5a-mvp-name').textContent = 'Aún sin elegir';
          $('#c5a-mvp-points').textContent = '— pts';
        }
      }

      function renderSelects(){
        const sel = $('#c5a-quick-student');
        sel.innerHTML = '';
        roster.forEach((a,idx)=>{
          const opt = document.createElement('option');
          opt.value = idx;
          opt.textContent = a.name;
          sel.appendChild(opt);
        });
      }

      function renderTable(){
        const tbody = $('#c5a-tbody');
        tbody.innerHTML = '';
        roster.forEach((a,idx)=>{
          const tr = document.createElement('tr');
          tr.className = (mvp && mvp.name===a.name) ? 'bg-amber-50' : '';
          tr.innerHTML = `
            <td class="px-4 py-2 text-sm text-gray-700">${idx+1}</td>
            <td class="px-4 py-2 text-sm font-medium text-gray-900">${a.name}</td>
            <td class="px-4 py-2 text-sm text-gray-700">${a.points}</td>
            <td class="px-4 py-2 flex gap-1">
              <button class="btn-primary text-xs px-2 py-1 rounded" data-action="plus" data-index="${idx}">+1</button>
              <button class="bg-red-600 text-white text-xs px-2 py-1 rounded" data-action="minus" data-index="${idx}">-1</button>
              <button class="bg-amber-500 text-white text-xs px-2 py-1 rounded" data-action="star" data-index="${idx}">⭐ MVP</button>
            </td>
          `;
          tbody.appendChild(tr);
        });
      }

      function renderEditor(){
        const ta = $('#c5a-textarea');
        ta.value = roster.map(a=>a.name).join('\n');
      }

      function renderAll(){
        sortRoster();
        stats();
        renderPodium();
        renderMvp();
        renderSelects();
        renderTable();
      }

      // Eventos
      $('#c5a-quick-apply').addEventListener('click', ()=>{
        const idx = parseInt($('#c5a-quick-student').value,10);
        const delta = parseInt($('#c5a-quick-reason').value,10);
        if(isNaN(idx)||isNaN(delta)) return;
        roster[idx].points = Math.max(0, roster[idx].points + delta);
        save();
        renderAll();
      });

      $('#c5a-btn-mvp').addEventListener('click', ()=>{
        if(!roster.length) return;
        const idx = Math.floor(Math.random()*roster.length);
        mvp = { name: roster[idx].name, points: roster[idx].points };
        saveMvp(mvp);
        renderAll();
      });

      $('#c5a-btn-clear-mvp').addEventListener('click', ()=>{
        mvp = null;
        saveMvp(null);
        renderAll();
      });

      $('#c5a-btn-reset').addEventListener('click', ()=>{
        if(confirm('¿Seguro que quieres poner a 0 todos los puntos de 5ºA?')){
          roster = roster.map(a=>({name:a.name, points:0}));
          mvp = null;
          save(); saveMvp(null);
          renderAll();
        }
      });

      // Tabla: delegación de eventos
      $('#c5a-tbody').addEventListener('click', (e)=>{
        const btn = e.target.closest('button');
        if(!btn) return;
        const idx = parseInt(btn.getAttribute('data-index'),10);
        const action = btn.getAttribute('data-action');
        if(Number.isNaN(idx)) return;

        if(action==='plus'){ roster[idx].points = Math.max(0, roster[idx].points + 1); }
        if(action==='minus'){ roster[idx].points = Math.max(0, roster[idx].points - 1); }
        if(action==='star'){ mvp = { name: roster[idx].name, points: roster[idx].points }; saveMvp(mvp); }
        save();
        renderAll();
      });

      // Editor lista
      const editor = $('#c5a-editor');
      $('#c5a-btn-edit').addEventListener('click', ()=>{
        editor.classList.toggle('hidden');
        renderEditor();
      });
      $('#c5a-editor-cancel').addEventListener('click', ()=>{
        editor.classList.add('hidden');
      });
      $('#c5a-editor-apply').addEventListener('click', ()=>{
        const lines = $('#c5a-textarea').value.split('\n').map(s=>s.trim()).filter(Boolean);
        if(!lines.length) return;
        roster = lines.map(n=>({name:n, points:0}));
        mvp = null;
        save(); saveMvp(null);
        editor.classList.add('hidden');
        renderAll();
      });

      // Render SOLO cuando la sección esté visible (no tocamos tu navegación)
      const obs = new MutationObserver(()=>{
        if(!sec.classList.contains('hidden')) renderAll();
      });
      obs.observe(sec, { attributes:true });

      // Si por lo que sea ya está visible al cargar
      if(!sec.classList.contains('hidden')) renderAll();
    })();
  </script>
</section>

     </section>
      <section id="5b" class="hidden"></section>
      <section id="6a" class="hidden"></section>
      <section id="6b" class="hidden"></section>

      <section id="objetivos" class="hidden">
        <h3 class="text-2xl font-semibold mb-4">Objetivos</h3>
        <p class="mb-6">La <strong>Liga Fantasy NSS</strong> es una propuesta de gamificación diseñada para transformar el día a día en clase en una experiencia divertida, motivadora y educativa. A través de un sistema de puntos y recompensas, se reconoce el esfuerzo, la constancia, el comportamiento positivo y la implicación tanto en el colegio como en casa.</p>
        <p class="mb-6">Cada alumno puede ir sumando puntos a lo largo de la semana por cumplir tareas, participar en clase, ayudar a los compañeros o mostrar una actitud ejemplar. La idea es que entiendan que su trabajo diario y su compromiso tienen valor, y que ese valor se traduce en recompensas simbólicas que fomentan la responsabilidad y el compañerismo.</p>
        <p class="mb-6">El objetivo no es competir contra los demás, sino superarse a uno mismo y formar parte de un equipo donde todos suman. De este modo, se refuerza el aprendizaje, el esfuerzo personal y el clima positivo en el aula.</p>

        <h4 class="text-xl font-bold mt-8 mb-2">Sistema de puntuación</h4>
        <ul class="list-disc pl-5 space-y-1">
          <li>📖 <strong>Leer un libro extra:</strong> +3 puntos</li>
          <li>📚 <strong>Entrega de tareas:</strong> +1 punto</li>
          <li>🙌 <strong>Buena acción o ayuda en clase:</strong> +1 punto</li>
          <li>❌ <strong>Falta de trabajo:</strong> -1 punto</li>
          <li>🚫 <strong>Incidencia grave:</strong> -3 puntos</li>
        </ul>
      </section>
     <section id="recompensas" class="hidden">
        <h3 class="text-2xl font-semibold mb-4"> Recompensas – Liga Fantasy NSS</h3>
        <p class="mb-6">Estas recompensas están diseñadas para premiar el esfuerzo, la constancia y el comportamiento positivo en el aula. Se otorgan según el puesto que ocupen en el ranking de la liga.</p>
        <div class="overflow-x-auto">
          <table class="min-w-full bg-white shadow rounded-lg overflow-hidden">
            <thead class="bg-gray-800 text-white">
              <tr>
                <th class="p-3 text-left">🏅 Puesto</th>
                <th class="p-3 text-left">🎁 Recompensa</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-200">
              <tr><td class="p-3">🥇 1º al 3º</td><td class="p-3">🟨 <strong>COMODÍN EXAMEN</strong> → Puede pedir ayuda al profesor en una pregunta del examen.</td></tr>
              <tr><td class="p-3">🥈 4º al 6º</td><td class="p-3">⏱️ <strong>+5 minutos extra</strong> para terminar un examen.</td></tr>
              <tr><td class="p-3">🥉 7º al 10º</td><td class="p-3">🪑 <strong>Elige su sitio</strong> en clase durante 3 días.</td></tr>
              <tr><td class="p-3">🟦 11º al 15º</td><td class="p-3">✅ <strong>Un positivo</strong> extra en el área que elija.</td></tr>
              <tr><td class="p-3">🟨 16º al 20º</td><td class="p-3">❌ <strong>Quitar un negativo</strong> de cualquier área.</td></tr>
              <tr><td class="p-3">🟩 21º al 25º</td><td class="p-3">🖍️ <strong>Responsable de material</strong> por un día (reparto, organización, ayuda en clase).</td></tr>
            </tbody>
          </table>
        </div>
      </section>
       </section>
      <section id="entrevistas" class="hidden">
        <h3 class="text-2xl font-semibold mb-4">Galería y Entrevistas</h3>
        <p>Fotos y entrevistas destacadas aparecerán aquí.</p>
      </section>
    </main>
  </div>

  <script>
    function startApp(){
      document.getElementById('intro').classList.add('hidden');
      document.getElementById('mainApp').classList.remove('hidden');
      document.getElementById('selector').classList.remove('hidden');
      document.getElementById('nav-top').classList.add('hidden');
    }

    function showSection(sec){
      document.querySelectorAll('main > section').forEach(s=>s.classList.add('hidden'));
      document.getElementById('selector').classList.add('hidden');
      document.getElementById('nav-top').classList.remove('hidden');
      document.getElementById(sec).classList.remove('hidden');
    }

    function goHome(){
      document.querySelectorAll('main > section').forEach(s=>s.classList.add('hidden'));
      document.getElementById('selector').classList.remove('hidden');
      document.getElementById('nav-top').classList.add('hidden');
    }
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LIGA FANTASY NSS 25/26</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --color-primary:#1D4ED8; /* azul vivo */
      --color-dark:#000000;
      --color-light:#ffffff;
    }
    body {font-family:'Segoe UI',sans-serif;}
    .btn-primary {background:var(--color-primary);color:var(--color-light);} 
    .btn-primary:hover {background:#1746c5;}
    .hero-bg {
      background:linear-gradient(135deg,var(--color-primary) 0%,#0f1b3d 100%);
    }
    .skew-bottom {position:relative;}
    .skew-bottom::after{content:"";position:absolute;bottom:-1px;left:0;width:100%;height:80px;background:var(--color-light);transform:skewY(3deg);transform-origin:0;}
  </style>
</head>
<body class="min-h-screen bg-gray-100">
  <!-- Hero de Bienvenida -->
  <section id="intro" class="hero-bg skew-bottom text-center text-white flex flex-col items-center justify-center min-h-screen px-6">
    <img src="logo.png" alt="Logo Colegio" class="w-44 mb-8 drop-shadow-lg" />
    <h1 class="text-5xl font-extrabold tracking-wide mb-4">LIGA FANTASY NSS 25/26</h1>
    <p class="text-xl mb-10 max-w-xl mx-auto">¡Motivando el aprendizaje con espíritu competitivo y trabajo en equipo!</p>
    <div class="flex justify-center mb-12 space-x-6">
      <img src="https://images.unsplash.com/photo-1596495577886-d920f1fb7238?auto=format&fit=crop&w=240&q=80" alt="Alumno feliz" class="w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg"/>
      <img src="https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=240&q=80" alt="Alumna feliz" class="w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg"/>
    </div>
    <button onclick="startApp()" class="btn-primary px-8 py-3 rounded-full text-lg font-semibold shadow-xl transition transform hover:-translate-y-1">Entrar a la Liga</button>
  </section>

  <!-- App Principal -->
  <div id="mainApp" class="hidden flex flex-col min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow sticky top-0 z-20">
      <div class="max-w-6xl mx-auto flex items-center justify-between py-3 px-4">
        <div class="flex items-center space-x-4">
          <img src="logo.png" alt="Logo" class="h-10"/>
          <h2 class="text-2xl font-bold text-gray-900">LIGA FANTASY NSS 25/26</h2>
        </div>
      </div>
    </header>

    <!-- Navegación Tabs -->
    <nav class="bg-gray-200">
      <div class="max-w-6xl mx-auto flex flex-wrap justify-center gap-2 py-2">
        <button class="tab-btn btn-primary px-4 py-1 rounded" onclick="showSection('5a')">5ºA</button>
        <button class="tab-btn btn-primary px-4 py-1 rounded" onclick="showSection('5b')">5ºB</button>
        <button class="tab-btn btn-primary px-4 py-1 rounded" onclick="showSection('6a')">6ºA</button>
        <button class="tab-btn btn-primary px-4 py-1 rounded" onclick="showSection('6b')">6ºB</button>
        <button class="tab-btn bg-gray-800 text-white px-4 py-1 rounded" onclick="showSection('objetivos')">Objetivos</button>
        <button class="tab-btn bg-gray-800 text-white px-4 py-1 rounded" onclick="showSection('recompensas')">Recompensas</button>
        <button class="tab-btn bg-gray-800 text-white px-4 py-1 rounded" onclick="showSection('entrevistas')">Entrevistas</button>
      </div>
    </nav>

    <!-- Contenido -->
    <main class="flex-1 max-w-6xl mx-auto w-full p-4">
      <!-- Secciones de clase -->
      <section id="5a" class="hidden"></section>
      <section id="5b" class="hidden"></section>
      <section id="6a" class="hidden"></section>
      <section id="6b" class="hidden"></section>
      <!-- Secciones adicionales -->
      <section id="objetivos" class="hidden">
        <h3 class="text-2xl font-semibold mb-4">Objetivos y Puntuaciones</h3>
        <p>Aquí listaremos los objetivos y los puntos que otorgan.</p>
      </section>
      <section id="recompensas" class="hidden">
        <h3 class="text-2xl font-semibold mb-4">Recompensas</h3>
        <p>Catálogo de premios que los alumnos pueden conseguir con sus puntos.</p>
      </section>
      <section id="entrevistas" class="hidden">
        <h3 class="text-2xl font-semibold mb-4">Galería y Entrevistas</h3>
        <p>Fotos y entrevistas destacadas aparecerán aquí.</p>
      </section>
    </main>
  </div>

  <!-- Plantilla de tabla -->
  <template id="table-template">
    <h3 class="text-2xl font-semibold mb-3"></h3>
    <div class="overflow-x-auto bg-white shadow rounded-lg">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">#</th>
            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Alumno</th>
            <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Puntos</th>
            <th class="px-4 py-2"></th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200"></tbody>
      </table>
    </div>
  </template>

  <script>
    const defaultData = {
      '5a': generateClass('5ºA'),
      '5b': generateClass('5ºB'),
      '6a': generateClass('6ºA'),
      '6b': generateClass('6ºB'),
    };

    function generateClass(label){
      const names = [
        'Álvaro','Lucía','Martín','Sofía','Leo','Daniela','Mateo','Emma','Hugo','Valeria',
        'Lucas','Carla','Pablo','Julia','Enzo','Martina','Alejandro','Paula','Manuel','Sara',
        'Adrián','Noa','David','Chloe','Mario'
      ]
      return names.map((n,i)=>({name:`${n} ${label}`.replace('º','°'),points:Math.floor(Math.random()*51)}));
    }

    const stored = JSON.parse(localStorage.getItem('fantasyData')||'null');
    let data = stored||defaultData;

    function save(){localStorage.setItem('fantasyData',JSON.stringify(data));}

    function buildTable(sectionId){
      const section = document.getElementById(sectionId);
      section.innerHTML='';
      const tpl = document.getElementById('table-template');
      const clone = tpl.content.cloneNode(true);
      clone.querySelector('h3').textContent = `Clase ${sectionId.toUpperCase()}`;
      const tbody = clone.querySelector('tbody');
      data[sectionId].sort((a,b)=>b.points-a.points);
      data[sectionId].forEach((alum,idx)=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`
          <td class="px-4 py-2 text-sm text-gray-700">${idx+1}</td>
          <td class="px-4 py-2 text-sm font-medium text-gray-900">${alum.name}</td>
          <td class="px-4 py-2 text-sm text-gray-700">${alum.points}</td>
          <td class="px-4 py-2 space-x-1">
            <button class="btn-primary text-xs px-2 py-1 rounded" onclick="changePoints('${sectionId}',${idx},1)">+1</button>
            <button class="bg-red-600 text-white text-xs px-2 py-1 rounded" onclick="changePoints('${sectionId}',${idx},-1)">-1</button>
          </td>`;
        tbody.appendChild(tr);
      });
      section.appendChild(clone);
    }

    function changePoints(classId,index,delta){
      data[classId][index].points = Math.max(0,data[classId][index].points+delta);
      save();
      buildTable(classId);
    }

    function startApp(){
      document.getElementById('intro').classList.add('hidden');
      document.getElementById('mainApp').classList.remove('hidden');
      showSection('5a');
    }

    function showSection(sec){
      document.querySelectorAll('main > section').forEach(s=>s.classList.add('hidden'));
      const current = document.getElementById(sec);
      current.classList.remove('hidden');
      if(['5a','5b','6a','6b'].includes(sec)) buildTable(sec);
    }
  </script>
</body>
</html>
